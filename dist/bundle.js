(()=>{var e={696:(e,t,r)=>{const s=r(58),n=r(72),o=r(558),i=r(968),a=r(404).version,c=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/gm;function d(e){console.log(`[dotenv@${a}][DEBUG] ${e}`)}function u(e){return e&&e.DOTENV_KEY&&e.DOTENV_KEY.length>0?e.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function l(e,t){let r;try{r=new URL(t)}catch(e){if("ERR_INVALID_URL"===e.code){const e=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw e.code="INVALID_DOTENV_KEY",e}throw e}const s=r.password;if(!s){const e=new Error("INVALID_DOTENV_KEY: Missing key part");throw e.code="INVALID_DOTENV_KEY",e}const n=r.searchParams.get("environment");if(!n){const e=new Error("INVALID_DOTENV_KEY: Missing environment part");throw e.code="INVALID_DOTENV_KEY",e}const o=`DOTENV_VAULT_${n.toUpperCase()}`,i=e.parsed[o];if(!i){const e=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${o} in your .env.vault file.`);throw e.code="NOT_FOUND_DOTENV_ENVIRONMENT",e}return{ciphertext:i,key:s}}function f(e){let t=null;if(e&&e.path&&e.path.length>0)if(Array.isArray(e.path))for(const r of e.path)s.existsSync(r)&&(t=r.endsWith(".vault")?r:`${r}.vault`);else t=e.path.endsWith(".vault")?e.path:`${e.path}.vault`;else t=n.resolve(process.cwd(),".env.vault");return s.existsSync(t)?t:null}const p={configDotenv:function(e){let t=n.resolve(process.cwd(),".env"),r="utf8";const i=Boolean(e&&e.debug);if(e){if(null!=e.path){let r=e.path;if(Array.isArray(r))for(const t of e.path)if(s.existsSync(t)){r=t;break}t=function(e){return"~"===e[0]?n.join(o.homedir(),e.slice(1)):e}(r)}null!=e.encoding?r=e.encoding:i&&d("No encoding is specified. UTF-8 is used by default")}try{const n=p.parse(s.readFileSync(t,{encoding:r}));let o=process.env;return e&&null!=e.processEnv&&(o=e.processEnv),p.populate(o,n,e),{parsed:n}}catch(e){return i&&d(`Failed to load ${t} ${e.message}`),{error:e}}},_configVault:function(e){console.log(`[dotenv@${a}][INFO] Loading env from encrypted .env.vault`);const t=p._parseVault(e);let r=process.env;return e&&null!=e.processEnv&&(r=e.processEnv),p.populate(r,t,e),{parsed:t}},_parseVault:function(e){const t=f(e),r=p.configDotenv({path:t});if(!r.parsed){const e=new Error(`MISSING_DATA: Cannot parse ${t} for an unknown reason`);throw e.code="MISSING_DATA",e}const s=u(e).split(","),n=s.length;let o;for(let e=0;e<n;e++)try{const t=l(r,s[e].trim());o=p.decrypt(t.ciphertext,t.key);break}catch(t){if(e+1>=n)throw t}return p.parse(o)},config:function(e){if(0===u(e).length)return p.configDotenv(e);const t=f(e);return t?p._configVault(e):(r=`You set DOTENV_KEY but you are missing a .env.vault file at ${t}. Did you forget to build it?`,console.log(`[dotenv@${a}][WARN] ${r}`),p.configDotenv(e));var r},decrypt:function(e,t){const r=Buffer.from(t.slice(-64),"hex");let s=Buffer.from(e,"base64");const n=s.subarray(0,12),o=s.subarray(-16);s=s.subarray(12,-16);try{const e=i.createDecipheriv("aes-256-gcm",r,n);return e.setAuthTag(o),`${e.update(s)}${e.final()}`}catch(e){const t=e instanceof RangeError,r="Invalid key length"===e.message,s="Unsupported state or unable to authenticate data"===e.message;if(t||r){const e=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw e.code="INVALID_DOTENV_KEY",e}if(s){const e=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw e.code="DECRYPTION_FAILED",e}throw e}},parse:function(e){const t={};let r,s=e.toString();for(s=s.replace(/\r\n?/gm,"\n");null!=(r=c.exec(s));){const e=r[1];let s=r[2]||"";s=s.trim();const n=s[0];s=s.replace(/^(['"`])([\s\S]*)\1$/gm,"$2"),'"'===n&&(s=s.replace(/\\n/g,"\n"),s=s.replace(/\\r/g,"\r")),t[e]=s}return t},populate:function(e,t,r={}){const s=Boolean(r&&r.debug),n=Boolean(r&&r.override);if("object"!=typeof t){const e=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw e.code="OBJECT_REQUIRED",e}for(const r of Object.keys(t))Object.prototype.hasOwnProperty.call(e,r)?(!0===n&&(e[r]=t[r]),s&&d(!0===n?`"${r}" is already defined and WAS overwritten`:`"${r}" is already defined and was NOT overwritten`)):e[r]=t[r]}};e.exports.configDotenv=p.configDotenv,e.exports._configVault=p._configVault,e.exports._parseVault=p._parseVault,e.exports.config=p.config,e.exports.decrypt=p.decrypt,e.exports.parse=p.parse,e.exports.populate=p.populate,e.exports=p},588:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DB=void 0;const s=r(876),n=[{id:"fb93797f-ecd2-4152-a623-470ad6a2079f",username:"User1",age:15,hobbies:[]},{id:"141c9084-6bdf-4044-af9a-31fc3d0d66c9",username:"User2",age:16,hobbies:[]},{id:"06f086fa-93cf-4867-b373-5961a630f03f",username:"User3",age:17,hobbies:[]},{id:"067f02c0-7ea9-4494-b06e-390370f988fc",username:"User4",age:18,hobbies:[]},{id:"6b06737d-8f0e-466b-91ce-3363880c4283",username:"User5",age:19,hobbies:[]},{id:"24c3f9c9-212e-4cd5-b938-89534f3d7a6a",username:"User6",age:20,hobbies:[]},{id:"0ada2dd8-5612-4f8f-8787-d5b333e46f25",username:"User7",age:21,hobbies:[]},{id:"2dc596b2-7546-409a-8071-1194c8e43251",username:"User8",age:22,hobbies:[]},{id:"3073df1d-4324-418a-af05-b60e6dfba8ec",username:"User9",age:23,hobbies:[]},{id:"e76f45b1-5261-4622-8a67-d56234b6b21a",username:"User10",age:24,hobbies:[]}];class o{constructor(){if(o._instance)return o._instance;o._instance=this,this._users=n}getUsers(){return this._users}getUserById(e){return this._users.find((t=>t.id===e))}createUser({username:e,age:t,hobbies:r}){const n={id:(0,s.v4)(),username:e,age:t,hobbies:r};return this._users=[...this._users,n],n}updateUser(e,t){const r=this._users.find((t=>t.id===e));if(!r)return null;const s={...r,...t};return this._users=this._users.map((t=>t.id===e?s:t)),s}deleteUserById(e){const t=this._users.find((t=>t.id===e));return this._users=this._users.filter((e=>e.id!==t?.id)),t}}t.DB=o},740:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(136)),o=s(r(716)),i=r(500),a=r(984),c=r(120),d=r(564),u=r(588),l=r(696),f=r(368);(0,l.config)(),new u.DB,new Promise((e=>{(0,f.spawn)("node ./src/index.ts",["--port","3005"]).stderr.on("data",(t=>{const r=t.toString();console.log("[server]",r),r.includes("localhost:3005")&&setTimeout(e,200)}))})),n.default.createServer(((e,t)=>{const{path:r}=o.default.parse(e.url,!0);if(!r||!r.startsWith("/api/users"))return t.statusCode=404,t.statusMessage="Route is unavailable",t.end("Route is unavailable");switch(e.method){case"GET":(0,i.get)(t,r);break;case"POST":{let s="";e.on("data",(e=>{s+=e})),e.on("end",(function(){(0,a.post)(t,r,JSON.parse(s))}));break}case"PUT":{let s="";e.on("data",(e=>{s+=e})),e.on("end",(function(){(0,d.put)(t,r,JSON.parse(s))}));break}case"DELETE":(0,c.deleteUser)(t,r)}})).on("error",(e=>{console.error(`Got error: ${e.message}`)})).listen(process.env.PORT,(()=>{console.log("Server is up on port "+process.env.PORT)}))},120:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteUser=void 0;const s=r(588),n=r(252),o=r(876);t.deleteUser=(e,t)=>{const r=new s.DB,i=(0,n.getUserId)(t);if(!i||!(0,o.validate)(i))return e.statusCode=400,e.statusMessage=new Error("Id is invalid"),e.end("Id is invalid");const a=r.deleteUserById(i);if(!a)return e.statusCode=404,e.statusMessage=new Error("User not found"),e.end("User not found");e.statusCode=204,e.end(JSON.stringify(a))}},500:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=void 0;const s=r(252),n=r(876),o=r(588);t.get=(e,t)=>{const r=new o.DB,i=(0,s.getUserId)(t);if(!i)return e.end(JSON.stringify(r.getUsers()));if(!(0,n.validate)(i))return e.statusCode=400,e.statusMessage=new Error("Id is invalid"),e.end("Id is invalid");const a=r.getUserById(i);if(!a)return e.statusCode=404,e.statusMessage=new Error("User not found"),e.end("User not found");e.end(JSON.stringify(a))}},984:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.post=void 0;const s=r(588);t.post=(e,t,r)=>{const n=new s.DB;if(!r?.username||!r?.hobbies||!r?.age)return e.statusCode=400,e.statusMessage=new Error("Not enough user data"),e.end("Not enough user data");const o=n.createUser(r);e.end(JSON.stringify(o))}},564:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.put=void 0;const s=r(588),n=r(252),o=r(876);t.put=(e,t,r)=>{const i=new s.DB,a=(0,n.getUserId)(t),c=Object.keys(r).every((e=>["username","age","hobbies"].includes(e)));if(!a||!c||!(0,o.validate)(a))return e.statusCode=400,e.statusMessage=new Error("Provided invalid user data"),e.end("Provided invalid user data");const d=i.updateUser(a,r);if(!d)return e.statusCode=404,e.statusMessage=new Error("User doesn't exist"),e.end("User doesn't exist");e.end(JSON.stringify(d))}},252:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserId=void 0,t.getUserId=e=>e.split("/")[3]},876:(e,t,r)=>{"use strict";r.r(t),r.d(t,{NIL:()=>I,parse:()=>y,stringify:()=>f,v1:()=>b,v3:()=>_,v4:()=>D,v5:()=>U,validate:()=>d,version:()=>w});var s=r(968),n=r.n(s);const o=new Uint8Array(256);let i=o.length;function a(){return i>o.length-16&&(n().randomFillSync(o),i=0),o.slice(i,i+=16)}const c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,d=function(e){return"string"==typeof e&&c.test(e)},u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).slice(1));function l(e,t=0){return u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]}const f=function(e,t=0){const r=l(e,t);if(!d(r))throw TypeError("Stringified UUID is invalid");return r};let p,v,g=0,h=0;const b=function(e,t,r){let s=t&&r||0;const n=t||new Array(16);let o=(e=e||{}).node||p,i=void 0!==e.clockseq?e.clockseq:v;if(null==o||null==i){const t=e.random||(e.rng||a)();null==o&&(o=p=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==i&&(i=v=16383&(t[6]<<8|t[7]))}let c=void 0!==e.msecs?e.msecs:Date.now(),d=void 0!==e.nsecs?e.nsecs:h+1;const u=c-g+(d-h)/1e4;if(u<0&&void 0===e.clockseq&&(i=i+1&16383),(u<0||c>g)&&void 0===e.nsecs&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");g=c,h=d,v=i,c+=122192928e5;const f=(1e4*(268435455&c)+d)%4294967296;n[s++]=f>>>24&255,n[s++]=f>>>16&255,n[s++]=f>>>8&255,n[s++]=255&f;const b=c/4294967296*1e4&268435455;n[s++]=b>>>8&255,n[s++]=255&b,n[s++]=b>>>24&15|16,n[s++]=b>>>16&255,n[s++]=i>>>8|128,n[s++]=255&i;for(let e=0;e<6;++e)n[s+e]=o[e];return t||l(n)},y=function(e){if(!d(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function m(e,t,r){function s(e,s,n,o){var i;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof s&&(s=y(s)),16!==(null===(i=s)||void 0===i?void 0:i.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let a=new Uint8Array(16+e.length);if(a.set(s),a.set(e,s.length),a=r(a),a[6]=15&a[6]|t,a[8]=63&a[8]|128,n){o=o||0;for(let e=0;e<16;++e)n[o+e]=a[e];return n}return l(a)}try{s.name=e}catch(e){}return s.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",s.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",s}const _=m("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),n().createHash("md5").update(e).digest()})),E={randomUUID:n().randomUUID},D=function(e,t,r){if(E.randomUUID&&!t&&!e)return E.randomUUID();const s=(e=e||{}).random||(e.rng||a)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=s[e];return t}return l(s)},U=m("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),n().createHash("sha1").update(e).digest()})),I="00000000-0000-0000-0000-000000000000",w=function(e){if(!d(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},368:e=>{"use strict";e.exports=require("child_process")},968:e=>{"use strict";e.exports=require("crypto")},58:e=>{"use strict";e.exports=require("fs")},136:e=>{"use strict";e.exports=require("http")},558:e=>{"use strict";e.exports=require("os")},72:e=>{"use strict";e.exports=require("path")},716:e=>{"use strict";e.exports=require("url")},404:e=>{"use strict";e.exports=JSON.parse('{"name":"dotenv","version":"16.4.2","description":"Loads environment variables from .env file","main":"lib/main.js","types":"lib/main.d.ts","exports":{".":{"types":"./lib/main.d.ts","require":"./lib/main.js","default":"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},"scripts":{"dts-check":"tsc --project tests/types/tsconfig.json","lint":"standard","lint-readme":"standard-markdown","pretest":"npm run lint && npm run dts-check","test":"tap tests/*.js --100 -Rspec","prerelease":"npm test","release":"standard-version"},"repository":{"type":"git","url":"git://github.com/motdotla/dotenv.git"},"funding":"https://dotenvx.com","keywords":["dotenv","env",".env","environment","variables","config","settings"],"readmeFilename":"README.md","license":"BSD-2-Clause","devDependencies":{"@definitelytyped/dtslint":"^0.0.133","@types/node":"^18.11.3","decache":"^4.6.1","sinon":"^14.0.1","standard":"^17.0.0","standard-markdown":"^7.1.0","standard-version":"^9.5.0","tap":"^16.3.0","tar":"^6.1.11","typescript":"^4.8.4"},"engines":{"node":">=12"},"browser":{"fs":false}}')}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(740)})();